<!DOCTYPE html>
<html>

<head>
      <meta charset="utf-8" />
      <title>Calculator</title>
      <link rel="stylesheet" href="./Content/styles.css">
</head>

<body>
      <div class="Main">
            <h1 class="ContentTitle">Online Calculator</h1>
            <div class="Item">
                  <p>
                        <input type="text" id="expressionInput" readonly placeholder="Enter an expression" size="50"
                              maxlength="100" />
                        <input type="button" value="reset" id="reset" />
                  </p>
                  <div class="ButtonSectionItem">
                        <div>
                              <div class="ButtonSection">
                                    <input class="ButtonItem" type="button" value="1" id="btn1">
                                    <input class="ButtonItem" type="button" value="2" id="btn2">
                                    <input class="ButtonItem" type="button" value="3" id="btn3">
                                    <input class="ButtonItem" type="button" value="+" id="btnPlus">
                              </div>
                              <div class="ButtonSection">
                                    <input class="ButtonItem" type="button" value="4" id="btn4">
                                    <input class="ButtonItem" type="button" value="5" id="btn5">
                                    <input class="ButtonItem" type="button" value="6" id="btn6">
                                    <input class="ButtonItem" type="button" value="-" id="btnMinus">
                              </div>
                              <div class="ButtonSection">
                                    <input class="ButtonItem" type="button" value="7" id="btn7">
                                    <input class="ButtonItem" type="button" value="8" id="btn8">
                                    <input class="ButtonItem" type="button" value="9" id="btn9">
                                    <input class="ButtonItem" type="button" value="/" id="btnDivide">
                              </div>
                              <div class="ButtonSection">
                                    <input class="ButtonItem" type="button" value="," id="btnСomma">
                                    <input class="ButtonItem" type="button" value="0" id="btnZero">
                                    <input class="ButtonItem" type="button" value="<" id="btnDelete">
                                    <input class="ButtonItem" type="button" value="*" id="btnMultiply">
                              </div>
                        </div>
                        <div>
                              <input class="ButtonEqual" type="button" value="=" id="btnEqual">
                        </div>
                  </div>
                  <p>
                        <input type="text" id="answerInput" readonly placeholder="Answer" size="50" />
                  </p>
            </div>
            <script>
                  async function GettingResponse(expression) {
                        const response = await fetch("/expression", {
                              method: "PUT",
                              headers: { "Accept": "application/json", "Content-Type": "application/json" },
                              body: JSON.stringify({
                                    exp: expression,
                              })
                        });
                        document.getElementById("answerInput").value = await response.json();
                  }
                  document.getElementById("btnEqual").addEventListener("click", async () => {
                        await GettingResponse(document.getElementById("expressionInput").value);
                  });
                  document.getElementById("btn1").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value += "1";
                  });
                  document.getElementById("btn2").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value += "2";
                  });
                  document.getElementById("btn3").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value += "3";
                  });
                  document.getElementById("btn4").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value += "4";
                  });
                  document.getElementById("btn5").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value += "5";
                  });
                  document.getElementById("btn6").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value += "6";
                  });
                  document.getElementById("btn7").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value += "7";
                  });
                  document.getElementById("btn8").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value += "8";
                  });
                  document.getElementById("btn9").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value += "9";
                  });
                  document.getElementById("btnСomma").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value += ",";
                  });
                  document.getElementById("btnZero").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value += "0";
                  });
                  document.getElementById("btnPlus").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value += "+";
                  });
                  document.getElementById("btnMinus").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value += "-";
                  });
                  document.getElementById("btnDivide").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value += "/";
                  });
                  document.getElementById("btnMultiply").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value += "*";
                  });
                  document.getElementById("btnDelete").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value = String(document.getElementById("expressionInput").value).slice(0, -1);
                  });
                  document.getElementById("reset").addEventListener("click", async () => {
                        document.getElementById("expressionInput").value = "";
                  });
            </script>
      </div>
</body>

</html>